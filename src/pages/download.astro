---
import Description from '../components/Description.astro'
import Title from '../components/Title.astro'
import Layout from '../layouts/Layout.astro'
import { releases } from '../components/download/release-data.astro'
import PlatformDownload from '../components/download/PlatformDownload.astro'
import DownloadScript from '../components/download/DownloadScript.astro'

import { library, icon } from '@fortawesome/fontawesome-svg-core'
import {
  faWindows,
  faLinux,
  faApple,
  faGithub,
} from '@fortawesome/free-brands-svg-icons'
import { Lock, ExternalLink } from 'lucide-astro'

library.add(faWindows, faLinux, faApple, faGithub)
const windowsIcon = icon({ prefix: 'fab', iconName: 'windows' })
const linuxIcon = icon({ prefix: 'fab', iconName: 'linux' })
const appleIcon = icon({ prefix: 'fab', iconName: 'apple' })
const githubIcon = icon({ prefix: 'fab', iconName: 'github' })
---

<DownloadScript />

<Layout title="Download Zen">
  <main class="data-[os='windows']:bg-zen-blue flex min-h-screen flex-col px-2">
    <div class="relative container mx-auto max-w-5xl py-12">
      <div class="mt-12 mb-6 flex flex-col gap-4">
        <Description id="download-title" class="text-6xl font-bold"
          >Download Zen</Description
        >
        <Description class="max-w-xl text-pretty">
          Download Zen Browser for your platform and experience a more mindful
          internet browsing experience. All downloads include SHA256 checksums
          for verification.
        </Description>
        <div
          id="twilight-info"
          class="border-zen-blue/20 bg-zen-blue/5 hidden max-w-xl items-center justify-center gap-3 rounded-xl border p-4 text-left text-pretty data-[twilight='true']:flex"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="text-zen-blue mt-0.5 h-5 w-5 flex-shrink-0"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="12" y1="8" x2="12" y2="12"></line>
            <line x1="12" y1="16" x2="12.01" y2="16"></line>
          </svg>
          <Description>
            <strong class="text-zen-blue font-medium">Twilight Mode:</strong> You're
            currently in Twilight mode, this means you're downloading the latest
            experimental features and updates.
          </Description>
        </div>
      </div>

      <!-- Platform selector -->
      <div class="mb-6 flex">
        <div
          class="inline-flex rounded-3xl bg-[rgba(255,255,255,0.4)] p-2 shadow-md dark:bg-[rgba(0,0,0,0.3)] dark:shadow-sm"
        >
          <button
            class="platform-selector data-[active='true']:bg-subtle rounded-2xl px-5 py-2.5 transition-all duration-200"
            data-platform="mac"
          >
            <span class="flex items-center gap-2">
              <Fragment set:html={appleIcon.html} />
              <span>macOS</span>
            </span>
          </button>
          <button
            class="platform-selector data-[active='true']:bg-subtle rounded-2xl px-5 py-2.5 transition-all duration-200"
            data-platform="windows"
          >
            <span class="flex items-center gap-2">
              <Fragment set:html={windowsIcon.html} />
              <span>Windows</span>
            </span>
          </button>
          <button
            class="platform-selector data-[active='true']:bg-subtle rounded-2xl px-5 py-2.5 transition-all duration-200"
            data-platform="linux"
          >
            <span class="flex items-center gap-2">
              <Fragment set:html={linuxIcon.html} />
              <span>Linux</span>
            </span>
          </button>
        </div>
      </div>

      <!-- Download Cards -->
      <div
        class="relative mb-16 overflow-hidden rounded-3xl bg-[rgba(255,255,255,0.4)] p-8 shadow-xl md:p-10 dark:bg-[rgba(0,0,0,0.3)]"
      >
        <!-- MacOS Download -->
        <PlatformDownload
          platform="mac"
          icon={appleIcon.html}
          title="MacOS Download"
          description="Works on both new Apple (M-Series) and older Intel Macs.<br />Requires macOS 11.0 or later."
          releases={releases.macos}
        />
        <!-- Windows Download -->
        <PlatformDownload
          platform="windows"
          icon={windowsIcon.html}
          title="Windows Download"
          description="Works on Windows 10 and Windows 11.<br />Not sure which version to get? Most people should choose the 64-bit installer."
          releases={releases.windows}
        />

        <!-- Linux Download -->
        <PlatformDownload
          platform="linux"
          icon={linuxIcon.html}
          title="Linux Download"
          description="Works with many Linux versions.<br />Pick the download that matches your system."
          releases={releases.linux}
        />
      </div>

      <!-- Additional resources -->
      <section class="mb-16">
        <h2 class="mb-4 text-3xl font-bold font-medium">
          Additional Resources
        </h2>

        <div class="grid grid-cols-1 gap-6 md:grid-cols-2">
          <a
            href="https://github.com/zen-browser"
            class="group rounded-2xl bg-[rgba(255,255,255,0.4)] p-6 transition-all duration-300 hover:shadow-lg dark:bg-[rgba(0,0,0,0.3)]"
          >
            <div class="flex items-start justify-between">
              <div>
                <h3 class="mb-2 text-xl font-medium">Source Code</h3>
                <p class="text-muted-foreground">
                  Explore Zen Browser's source code on GitHub. Contribute to the
                  project or build your own version.
                </p>
              </div>
              <div
                class="border-subtle hover:bg-coral hover:bg-opacity-10 group-hover:border-coral group-hover:border-opacity-10 grid aspect-square h-12 w-12 place-items-center rounded-xl border transition-all duration-100"
              >
                <div
                  class="text-muted-foreground group-hover:text-coral transition-all duration-200"
                >
                  <Fragment set:html={githubIcon.html} />
                </div>
              </div>
            </div>
          </a>

          <a
            href="https://docs.zen-browser.app"
            class="group rounded-2xl bg-[rgba(255,255,255,0.4)] p-6 transition-all duration-200 hover:shadow-lg dark:bg-[rgba(0,0,0,0.3)]"
          >
            <div class="flex items-start justify-between">
              <div>
                <h3 class="mb-2 text-xl font-medium">Documentation</h3>
                <p class="text-muted-foreground">
                  Access comprehensive documentation, guides, and tutorials for
                  Zen Browser.
                </p>
              </div>
              <div
                class="border-subtle hover:bg-coral hover:bg-opacity-10 group-hover:border-coral group-hover:border-opacity-20 rounded-xl border p-3 transition-all duration-100"
              >
                <ExternalLink
                  class="group-hover:text-coral h-5 w-5 transition-all duration-200"
                />
              </div>
            </div>
          </a>
        </div>
      </section>

      <!-- Security Notice -->
      <div
        class="bg-opaicty-10 bg-subtle grid grid-cols-[auto,1fr] gap-4 rounded-2xl p-6"
      >
        <div class="bg-subtle h-fit rounded-xl p-3">
          <Lock class="h-5 w-5" />
        </div>

        <div>
          <h3 class="mb-2 text-lg font-medium">Verified & Secure Downloads</h3>
          <p class="text-muted-foreground">
            All Zen downloads are signed and verified for your security. We
            recommend downloading directly from our official website or GitHub
            repository. If your download seems broken or gets flagged by your
            antivirus, please
            <a
              href="https://github.com/zen-browser/desktop/issues/new/choose"
              class="text-accent zen-link ml-1">report it to us</a
            >.
          </p>
        </div>
      </div>
    </div>
  </main>
</Layout>

<style is:global>
  /* Download card icon */
  .download-card__icon {
    @apply bg-subtle text-coral data-[twilight='true']:text-zen-blue flex h-10 w-10 items-center justify-center rounded-full p-2;
  }

  /* Make FontAwesome icons match size */
  .download-card__icon svg {
    width: 1.5rem;
    height: 1.5rem;
  }
</style>

<style is:global>
  .os-icon svg {
    height: 3rem;
    width: 3rem;
  }
</style>
